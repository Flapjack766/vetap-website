# VETAP Event - ุชุฏูู ุฅูุดุงุก ุงูุญุณุงุจ ูุงูุชุญูู

## โ ููู ูุนูู ุฅูุดุงุก ุงูุญุณุงุจ

### 1. ุงูุนูููุฉ ุงูุชููุงุฆูุฉ โ

ุนูุฏูุง ูููู ุงููุณุชุฎุฏู ุจุฅูุดุงุก ุญุณุงุจ:

```typescript
await supabase.auth.signUp({
  email,
  password,
  options: {
    emailRedirectTo: `${window.location.origin}/${locale}/event/dashboard`,
    data: {
      name: name.trim(),
      phone: phone.trim(),
      phone_country_code: selectedCountry.phoneCode,
      country: selectedCountry.name,
      city: city.trim(),
    },
  },
});
```

### 2. ูุง ูุญุฏุซ ุชููุงุฆูุงู ูู Supabase โ

#### ุฃ) ุฅูุดุงุก ุงููุณุชุฎุฏู ูู `auth.users`
- โ Supabase ููุดุฆ ุงููุณุชุฎุฏู ุชููุงุฆูุงู ูู ุฌุฏูู `auth.users`
- โ ูุชู ุญูุธ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ
- โ ูุชู ุญูุธ `raw_user_meta_data` (name, phone, phone_country_code, country, city)

#### ุจ) ุฅุฑุณุงู ุฑุณุงูุฉ ุงูุชุญูู
- โ **Supabase ูุฑุณู ุฑุณุงูุฉ ุงูุชุญูู ุชููุงุฆูุงู** ุฅูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ุงูุฑุณุงูุฉ ุชุญุชูู ุนูู ุฑุงุจุท ุงูุชุญูู
- โ ุนูุฏ ุงูููุฑ ุนูู ุงูุฑุงุจุทุ ูุชู ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

#### ุฌ) ุฅูุดุงุก ุณุฌู ูู `event_users`
- โ ุงูู trigger `handle_new_auth_user()` ูุนูู ุชููุงุฆูุงู ุจุนุฏ ุฅูุดุงุก ุงููุณุชุฎุฏู
- โ ููุดุฆ ุณุฌู ูู ุฌุฏูู `event_users`
- โ ููุฑุฃ ุงูุจูุงูุงุช ูู `raw_user_meta_data` ููุญูุธูุง:
  - `name` โ `event_users.name`
  - `phone` โ `event_users.phone`
  - `phone_country_code` โ `event_users.phone_country_code`
  - `country` โ `event_users.country`
  - `city` โ `event_users.city`

---

## ๐ง ุฅุนุฏุงุฏุงุช Email ูู Supabase

### โ๏ธ ููู: ูุฌุจ ุชูุนูู Email Confirmation ูู Supabase Dashboard

1. **ุงุฐูุจ ุฅูู Supabase Dashboard:**
   - https://supabase.com/dashboard
   - ุงุฎุชุฑ ูุดุฑูุน VETAP Event

2. **Authentication โ Settings โ Email Auth:**
   - โ ุชุฃูุฏ ูู ุชูุนูู "Enable email confirmations"
   - โ ุชุฃูุฏ ูู ุชูุนูู "Enable email signup"

3. **Email Templates:**
   - ููููู ุชุฎุตูุต ูุงูุจ ุฑุณุงูุฉ ุงูุชุญูู
   - ููููู ุชุบููุฑ ูุต ุงูุฑุณุงูุฉ

4. **SMTP Settings (ุงุฎุชูุงุฑู):**
   - Supabase ูุณุชุฎุฏู SMTP ุงูุชุฑุงุถู
   - ููููู ุฅุนุฏุงุฏ SMTP ูุฎุตุต (Gmail, SendGrid, ุฅูุฎ)

---

## ๐ ุงูุชุญูู ูู ุฃู ูู ุดูุก ูุนูู

### 1. ุงูุชุญูู ูู ุฅูุดุงุก ุงููุณุชุฎุฏู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

```sql
-- ูู Supabase SQL Editor
SELECT * FROM auth.users ORDER BY created_at DESC LIMIT 5;

-- ูุฌุจ ุฃู ุชุฑู ุงููุณุชุฎุฏู ุงูุฌุฏูุฏ ูุน:
-- - email
-- - raw_user_meta_data (ูุญุชูู ุนูู name, phone, country, city)
```

### 2. ุงูุชุญูู ูู ุฅูุดุงุก ุณุฌู ูู event_users

```sql
-- ูู Supabase SQL Editor
SELECT * FROM event_users ORDER BY created_at DESC LIMIT 5;

-- ูุฌุจ ุฃู ุชุฑู ุงูุณุฌู ุงูุฌุฏูุฏ ูุน:
-- - id (ููุณ id ูู auth.users)
-- - email
-- - name
-- - phone
-- - phone_country_code
-- - country
-- - city
```

### 3. ุงูุชุญูู ูู ุฅุฑุณุงู ุฑุณุงูุฉ ุงูุชุญูู

- โ ุชุญูู ูู ุตูุฏูู ุงููุงุฑุฏ ููุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ุชุญูู ูู ูุฌูุฏ ุงูุฑุณุงุฆู ุบูุฑ ุงููุฑุบูุจ ูููุง (Spam)
- โ ูุฌุจ ุฃู ุชุฌุฏ ุฑุณุงูุฉ ูู Supabase ุชุญุชูู ุนูู ุฑุงุจุท ุงูุชุญูู

---

## ๐ ุชุฏูู ุงูุนูููุฉ ุงููุงูู

```
1. ุงููุณุชุฎุฏู ูููุฃ ุงููููุฐุฌ
   โ
2. supabase.auth.signUp() ูุชู ุงุณุชุฏุนุงุคู
   โ
3. Supabase ููุดุฆ ุงููุณุชุฎุฏู ูู auth.users
   โ
4. Supabase ูุฑุณู ุฑุณุงูุฉ ุงูุชุญูู ุชููุงุฆูุงู โ ๐ง
   โ
5. Trigger handle_new_auth_user() ูุนูู ุชููุงุฆูุงู
   โ
6. ููุดุฆ ุณุฌู ูู event_users ูุน ุฌููุน ุงูุจูุงูุงุช
   โ
7. ุงููุณุชุฎุฏู ูุฑู ุฑุณุงูุฉ "ุชุญูู ูู ุจุฑูุฏู ุงูุฅููุชุฑููู"
   โ
8. ุงููุณุชุฎุฏู ูููุฑ ุนูู ุฑุงุจุท ุงูุชุญูู ูู ุงูุจุฑูุฏ
   โ
9. Supabase ูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
   โ
10. ุงููุณุชุฎุฏู ููููู ุชุณุฌูู ุงูุฏุฎูู ุงูุขู
```

---

## โ ุงูุฎูุงุตุฉ

### ูุนูุ ูู ุดูุก ูุนูู ุชููุงุฆูุงู:

1. โ **ุฅูุดุงุก ุงูุญุณุงุจ** โ ูุชู ุญูุธู ูู `auth.users` ุชููุงุฆูุงู
2. โ **ุฅูุดุงุก ุณุฌู ูู event_users** โ ูุชู ุนุจุฑ ุงูู trigger ุชููุงุฆูุงู
3. โ **ุฅุฑุณุงู ุฑุณุงูุฉ ุงูุชุญูู** โ Supabase ูุฑุณููุง ุชููุงุฆูุงู

### ูุง ุชุญุชุงุฌ ูุนูู ูู Supabase Dashboard:

1. โ ุชุฃูุฏ ูู ุชูุนูู "Enable email confirmations"
2. โ ุชุฃูุฏ ูู ุชูุนูู "Enable email signup"
3. โ (ุงุฎุชูุงุฑู) ุฎุตุต ูุงูุจ ุฑุณุงูุฉ ุงูุชุญูู

### ููุงุญุธุงุช ูููุฉ:

- โ๏ธ ุฅุฐุง ูู ุชุตู ุฑุณุงูุฉ ุงูุชุญูู:
  - ุชุญูู ูู Spam folder
  - ุชุญูู ูู ุฅุนุฏุงุฏุงุช Email ูู Supabase Dashboard
  - ุชุฃูุฏ ูู ุฃู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุตุญูุญ

- โ๏ธ ุฅุฐุง ูู ูููุดุฃ ุณุฌู ูู event_users:
  - ุชุญูู ูู ุฃู ุงูู trigger ููุฌูุฏ ููุนูู
  - ุชุญูู ูู logs ูู Supabase Dashboard
  - ุชุฃูุฏ ูู ุชุทุจูู migrations ุจุดูู ุตุญูุญ

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุฑุณุงูุฉ ุงูุชุญูู ูุง ุชุตู

**ุงูุญู:**
1. ุชุญูู ูู Spam folder
2. ุชุญูู ูู ุฅุนุฏุงุฏุงุช Email ูู Supabase Dashboard
3. ุชุญูู ูู SMTP settings
4. ุฌุฑุจ ุฅุนุงุฏุฉ ุฅุฑุณุงู ุงูุฑุณุงูุฉ

### ุงููุดููุฉ: ุงูุณุฌู ูุง ูููุดุฃ ูู event_users

**ุงูุญู:**
1. ุชุญูู ูู ุฃู migration `010_vetap_event_auth_sync.sql` ุชู ุชุทุจููู
2. ุชุญูู ูู ุฃู migration `011_vetap_event_users_contact_info.sql` ุชู ุชุทุจููู
3. ุชุญูู ูู logs ูู Supabase Dashboard โ Database โ Logs
4. ุชุญูู ูู ุฃู ุงูู trigger ููุฌูุฏ:
   ```sql
   SELECT * FROM pg_trigger WHERE tgname = 'on_auth_user_created';
   ```

### ุงููุดููุฉ: ุงูุจูุงูุงุช ูุง ุชูุญูุธ ูู event_users

**ุงูุญู:**
1. ุชุญูู ูู ุฃู ุงูุจูุงูุงุช ุชูุฑุณู ูู `options.data`
2. ุชุญูู ูู ุฃู ุงูู trigger ููุฑุฃ ูู `raw_user_meta_data`
3. ุชุญูู ูู logs ูู Supabase Dashboard

